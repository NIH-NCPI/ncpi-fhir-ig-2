{
  "resourceType": "StructureDefinition",
  "id": "ncpi-assay-task",
  "url": "https://nih-ncpi.github.io/ncpi-fhir-ig-2/StructureDefinition/ncpi-assay-task",
  "name": "NcpiAssayTask",
  "title": "Condensed Assay Task",
  "status": "draft",
  "description": "Profile to represent informatics assay definitions within NCPI, such as Submitted Data, WGS, RNA-seq, etc.  A single resource to represent the intent, execution, and results of a research assay.",
  "fhirVersion": "4.0.1",
  "kind": "resource",
  "abstract": false,
  "type": "Task",
  "baseDefinition": "http://hl7.org/fhir/StructureDefinition/Task",
  "derivation": "constraint",
  "differential": {
    "element": [
      {
        "id": "Task.status",
        "path": "Task.status",
        "mustSupport": true
      },
      {
        "id": "Task.code",
        "path": "Task.code",
        "min": 1,
        "mustSupport": true,
        "binding": {
          "strength": "preferred",
          "valueSet": "http://edamontology.org"
        }
      },
      {
        "id": "Task.for",
        "path": "Task.for",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Task.executionPeriod",
        "path": "Task.executionPeriod",
        "mustSupport": true
      },
      {
        "id": "Task.note",
        "path": "Task.note",
        "mustSupport": true
      },
      {
        "id": "Task.input",
        "path": "Task.input",
        "slicing": {
          "discriminator": [
            {
              "type": "pattern",
              "path": "type"
            }
          ],
          "rules": "open"
        }
      },
      {
        "id": "Task.input:specimen",
        "path": "Task.input",
        "sliceName": "specimen",
        "min": 0,
        "max": "*",
        "mustSupport": true
      },
      {
        "id": "Task.input:specimen.type",
        "path": "Task.input.type",
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "Specimen"
            }
          ]
        }
      },
      {
        "id": "Task.input:specimen.value[x]",
        "path": "Task.input.value[x]",
        "slicing": {
          "discriminator": [
            {
              "type": "type",
              "path": "$this"
            }
          ],
          "ordered": false,
          "rules": "open"
        }
      },
      {
        "id": "Task.input:specimen.value[x]:valueReference",
        "path": "Task.input.value[x]",
        "sliceName": "valueReference",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.org/fhir/StructureDefinition/Specimen"
            ]
          }
        ]
      },
      {
        "id": "Task.output",
        "path": "Task.output",
        "slicing": {
          "discriminator": [
            {
              "type": "pattern",
              "path": "type"
            }
          ],
          "rules": "open"
        }
      },
      {
        "id": "Task.output:result",
        "path": "Task.output",
        "sliceName": "result",
        "min": 0,
        "max": "*",
        "mustSupport": true
      },
      {
        "id": "Task.output:result.type",
        "path": "Task.output.type",
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "DocumentReference"
            }
          ]
        }
      },
      {
        "id": "Task.output:result.value[x]",
        "path": "Task.output.value[x]",
        "slicing": {
          "discriminator": [
            {
              "type": "type",
              "path": "$this"
            }
          ],
          "ordered": false,
          "rules": "open"
        }
      },
      {
        "id": "Task.output:result.value[x]:valueReference",
        "path": "Task.output.value[x]",
        "sliceName": "valueReference",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.org/fhir/StructureDefinition/DocumentReference"
            ]
          }
        ]
      },
      {
        "id": "Task.output:observation",
        "path": "Task.output",
        "sliceName": "observation",
        "min": 0,
        "max": "*",
        "mustSupport": true
      },
      {
        "id": "Task.output:observation.type",
        "path": "Task.output.type",
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "Observation"
            }
          ]
        }
      },
      {
        "id": "Task.output:observation.value[x]",
        "path": "Task.output.value[x]",
        "slicing": {
          "discriminator": [
            {
              "type": "type",
              "path": "$this"
            }
          ],
          "ordered": false,
          "rules": "open"
        }
      },
      {
        "id": "Task.output:observation.value[x]:valueReference",
        "path": "Task.output.value[x]",
        "sliceName": "valueReference",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.org/fhir/StructureDefinition/Observation"
            ]
          }
        ]
      }
    ]
  }
}
