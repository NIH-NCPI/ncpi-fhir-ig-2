# Informatics Assay Requests

The `NcpiAssay` profile is based on the `ServiceRequest` resource and is used to represent informatics assay orders such as whole genome sequencing or RNA-seq. It enables traceability and linkages to specimens, patients, and supporting evidence.


## Key Features of `NcpiAssay`

1. **Status and Intent**:
   - The `status` field indicates the current state of the assay request (e.g., `#active`).
   - The `intent` field specifies the purpose of the request (e.g., `#order`).

2. **Performer**:
   - The `performer` field uses the Device and DeviceDefinition resources to represent the laboratory, device or software application performing the assay. This allows for detailed tracking of who is responsible for the assay execution.
   - See the [Device](https://hl7.org/fhir/device.html) and [DeviceDefinition](https://hl7.org/fhir/devicedefinition.html) resources for more details on how to represent devices and software applications in FHIR.  Specifically, refer to [Software](https://build.fhir.org/devicedefinition.html#8.18.1.12)
     - > The Device resource can represent an instance of a software component or application. A software item like a data transformer or converter, or a clinical support algorithm, may be an independently deployed, managed and configured entity that contributes to patient care and needs to be documented just a surely as, say, a physical cardiac monitor. The FHIR Device resource can contain instance data such as version information and operational attributes. It can also represent the relationship of the software item to other device and information system components through reference linkages. This category includes software regardless of whether or not is regulated. Device resource instances documenting software items are important to traceability of data and analyzing adverse events, and so have important patient safety roles.

3. **Subject**:
   - The `subject` field links the assay to a specific `Patient` or `Group`. This allows assays to be associated with individuals or cohorts.

4. **Specimens**:
   - The `specimen` field references one or more `Specimen` resources that are used in the assay. This ensures traceability to the biological materials analyzed.

5. **Reason for the Assay**:
   - The `reasonCode` field provides the clinical or research justification for the assay, such as "Investigating suspected hereditary condition."

6. **Authored Date**:
   - The `authoredOn` field records the date and time when the assay request was created.

7. **Tasks**:
   - The `Task` resource can be used to represent workflow steps or processes derived from the assay. For more details, see the [Task](https://hl7.org/fhir/task.html) resource.
   - The `Task.parameters` field can be used to include additional parameters or metadata related to the assay.

8. **Files and Documents**:
   - The `NcpiFile(DocumentReference)` resource can be used to represent files or documents generated by the assay, such as BAM files or VCF files. For more details, see the [DocumentReference](https://hl7.org/fhir/documentreference.html) resource.

## Traceability and Provenance

The `NcpiAssay` profile supports detailed traceability by linking to related resources such as:
- **Specimens**: Biological materials analyzed in the assay.
- **Patients or Groups**: Individuals or cohorts associated with the assay.
- **Tasks**: Workflow steps or processes fulfilling the assay.
- **Files**: Outputs generated by the assay, such as BAM files.
- **Device DeviceDefinition**: Laboratory, device or software applications performing the assay.

### Example Usage

<div style="text-align: center;">
    <img style="display: block; margin: 0 auto; margin-bottom: 20px;" width="100%" src="assay-usage.png" alt="Example Assay Diagram" />
</div>
