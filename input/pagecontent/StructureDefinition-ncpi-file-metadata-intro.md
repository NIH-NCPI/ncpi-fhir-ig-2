#### Key Guidelines
The NCPI File Metadata profile is based on the standard resource type, [Observation](https://hl7.org/fhir/r4/observation.html) and is intended to represent information about the file metadata associated with a file.

##### Added Profile Restrictions
In order to ensure that our resources are interoperable across studies, we have employed a number of restrictions that should make consuming Patient resources more consistent.

The NCPI File Metadata profile is essentially a collection of slices built on one another. 

#### Recommended Practices
This IG supports FASTQ, BAM/CRAM, MAF, VCF, and Proteomics file types, all of which use the NCPI File Metadata profile as its Parent. Each file has a set of expectations for pieces of information to include based on the specific needs of each file type.

##### FHIR Mappings
The following fields from the shared data model are to be mapped to the NCPI File Metadata as shown below:

| **Logical Model Property** | **Cardinality** | **NCPI FHIR Mapping** | **Usage Guidance** | **Notes**|
|parent_file|1..1|focus|A Reference to a file to which the metadata is related||
|assay_strategy|[BAM/CRAM](StructureDefinition-ncpi-bamcram-definitions.html#Observation.component:assay_strategy), [FASTQ](StructureDefinition-ncpi-fastq-definitions.html#Observation.component:assay_strategy), [MAF](StructureDefinition-ncpi-maf-definitions.html#Observation.component:assay_strategy), [Proteomics](StructureDefinition-ncpi-proteomics-definitions.html#Observation.component:assay_strategy), [VCF](StructureDefinition-ncpi-vcf-definitions.html#Observation.component:assay_strategy)|Observation.component|e.g., Whole Genome Sequencing|
|platform_instrument|[BAM/CRAM](StructureDefinition-ncpi-bamcram-definitions.html#Observation.component:platform_instrument), [FASTQ](StructureDefinition-ncpi-fastq-definitions.html#Observation.component:platform_instrument), [MAF](StructureDefinition-ncpi-maf-definitions.html#Observation.component:platform_instrument), [Proteomics](StructureDefinition-ncpi-proteomics-definitions.html#Observation.component:platform_instrument), [VCF](StructureDefinition-ncpi-vcf-definitions.html#Observation.component:platform_instrument)|Observation.component|e.g., Illumina HiSeq2000|
|library_prep|[BAM/CRAM](StructureDefinition-ncpi-bamcram-definitions.html#Observation.component:library_prep), [FASTQ](StructureDefinition-ncpi-fastq-definitions.html#Observation.component:library_prep), [MAF](StructureDefinition-ncpi-maf-definitions.html#Observation.component:library_prep), [Proteomics](StructureDefinition-ncpi-proteomics-definitions.html#Observation.component:library_prep), [VCF](StructureDefinition-ncpi-vcf-definitions.html#Observation.component:library_prep)|Observation.component|e.g., polyA|
|library_selection|[BAM/CRAM](StructureDefinition-ncpi-bamcram-definitions.html#Observation.component:library_selection), [FASTQ](StructureDefinition-ncpi-fastq-definitions.html#Observation.component:library_selection), [MAF](StructureDefinition-ncpi-maf-definitions.html#Observation.component:library_selection), [Proteomics](StructureDefinition-ncpi-proteomics-definitions.html#Observation.component:library_selection), [VCF](StructureDefinition-ncpi-vcf-definitions.html#Observation.component:library_selection)|Observation.component||
|strandedness|[BAM/CRAM](StructureDefinition-ncpi-bamcram-definitions.html#Observation.component:strandedness), [FASTQ](StructureDefinition-ncpi-fastq-definitions.html#Observation.component:strandedness), [MAF](StructureDefinition-ncpi-maf-definitions.html#Observation.component:strandedness), [Proteomics](StructureDefinition-ncpi-proteomics-definitions.html#Observation.component:strandedness), [VCF](StructureDefinition-ncpi-vcf-definitions.html#Observation.component:strandedness)|Observation.component|stranded, unstranded|
|target_region|[BAM/CRAM](StructureDefinition-ncpi-bamcram-definitions.html#Observation.component:target_region), [FASTQ](StructureDefinition-ncpi-fastq-definitions.html#Observation.component:target_region), [MAF](StructureDefinition-ncpi-maf-definitions.html#Observation.component:target_region), [Proteomics](StructureDefinition-ncpi-proteomics-definitions.html#Observation.component:target_region), [VCF](StructureDefinition-ncpi-vcf-definitions.html#Observation.component:target_region)|Observation.component||
|is_paired_end|[BAM/CRAM](StructureDefinition-ncpi-bamcram-definitions.html#Observation.component:is_paired_end), [FASTQ](StructureDefinition-ncpi-fastq-definitions.html#Observation.component:is_paired_end), [MAF](StructureDefinition-ncpi-maf-definitions.html#Observation.component:is_paired_end), [Proteomics](StructureDefinition-ncpi-proteomics-definitions.html#Observation.component:is_paired_end), [VCF](StructureDefinition-ncpi-vcf-definitions.html#Observation.component:is_paired_end)|Observation.component|True, False|
|adaptor_trimmed|[BAM/CRAM](StructureDefinition-ncpi-bamcram-definitions.html#Observation.component:adaptor_trimmed), [FASTQ](StructureDefinition-ncpi-fastq-definitions.html#Observation.component:adaptor_trimmed), [MAF](StructureDefinition-ncpi-maf-definitions.html#Observation.component:adaptor_trimmed), [Proteomics](StructureDefinition-ncpi-proteomics-definitions.html#Observation.component:adaptor_trimmed), [VCF](StructureDefinition-ncpi-vcf-definitions.html#Observation.component:adaptor_trimmed)|Observation.component|True, False|
|reference_genome|[BAM/CRAM](StructureDefinition-ncpi-bamcram-definitions.html#Observation.component:reference_genome), [FASTQ](StructureDefinition-ncpi-fastq-definitions.html#Observation.component:reference_genome), [MAF](StructureDefinition-ncpi-maf-definitions.html#Observation.component:reference_genome), [Proteomics](StructureDefinition-ncpi-proteomics-definitions.html#Observation.component:reference_genome), [VCF](StructureDefinition-ncpi-vcf-definitions.html#Observation.component:reference_genome)|Observation.component|GRCh37, GRCh38|
|workflow_type|[BAM/CRAM](StructureDefinition-ncpi-bamcram-definitions.html#Observation.component:workflow_type), [FASTQ](StructureDefinition-ncpi-fastq-definitions.html#Observation.component:workflow_type), [MAF](StructureDefinition-ncpi-maf-definitions.html#Observation.component:workflow_type), [Proteomics](StructureDefinition-ncpi-proteomics-definitions.html#Observation.component:workflow_type), [VCF](StructureDefinition-ncpi-vcf-definitions.html#Observation.component:workflow_type)|Observation.component|e.g., alignment, somatic|
|workflow_tool|[BAM/CRAM](StructureDefinition-ncpi-bamcram-definitions.html#Observation.component:workflow_tool), [FASTQ](StructureDefinition-ncpi-fastq-definitions.html#Observation.component:workflow_tool), [MAF](StructureDefinition-ncpi-maf-definitions.html#Observation.component:workflow_tool), [Proteomics](StructureDefinition-ncpi-proteomics-definitions.html#Observation.component:workflow_tool), [VCF](StructureDefinition-ncpi-vcf-definitions.html#Observation.component:workflow_tool)|Observation.component|e.g., BAM-MEM, GATK-Haplotype Caller|
|specimen_collection|[BAM/CRAM](StructureDefinition-ncpi-bamcram-definitions.html#key_Observation.extension:collection), [FASTQ](StructureDefinition-ncpi-fastq-definitions.html#key_Observation.extension:collection), [MAF](StructureDefinition-ncpi-maf-definitions.html#key_Observation.extension:collection), [Proteomics](StructureDefinition-ncpi-proteomics-definitions.html#key_Observation.extension:collection), [VCF](StructureDefinition-ncpi-vcf-definitions.html#key_Observation.extension:collection)|Extension Reference(Any)|e.g., Reference(Participant_ID)|